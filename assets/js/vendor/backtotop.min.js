(function($) {
    "use strict";

    $(document).ready(function() {
        var r = $(".rn-progress-parent path")[0]; // Get the first element in the jQuery collection

        if (r) { // Check if the element is found
            var n = r.getTotalLength();
            r.style.transition = r.style.WebkitTransition = "none";
            r.style.strokeDasharray = n + " " + n;
            r.style.strokeDashoffset = n;
            r.getBoundingClientRect();
            r.style.transition = r.style.WebkitTransition = "stroke-dashoffset 10ms linear";

            function updateDashOffset() {
                var scrollTop = $(window).scrollTop();
                var documentHeight = $(document).height() - $(window).height();
                r.style.strokeDashoffset = n - scrollTop * n / documentHeight;
            }

            // Initial call
            updateDashOffset();

            // Update on scroll
            $(window).scroll(updateDashOffset);

            // Add/remove class based on scroll position
            $(window).on("scroll", function() {
                if ($(this).scrollTop() > 50) {
                    $(".rn-progress-parent").addClass("rn-backto-top-active");
                } else {
                    $(".rn-progress-parent").removeClass("rn-backto-top-active");
                }
            });

            // Scroll to top on click
            $(".rn-progress-parent").on("click", function(event) {
                event.preventDefault();
                $("html, body").animate({
                    scrollTop: 0
                }, 880);
            });
        } else {
            console.error("SVG element not found.");
        }
    });

})(jQuery);
